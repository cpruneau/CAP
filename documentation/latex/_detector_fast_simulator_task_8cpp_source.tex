\hypertarget{_detector_fast_simulator_task_8cpp_source}{}\doxysection{Detector\+Fast\+Simulator\+Task.\+cpp}
\label{_detector_fast_simulator_task_8cpp_source}\index{Base/DetectorFastSimulatorTask.cpp@{Base/DetectorFastSimulatorTask.cpp}}
\mbox{\hyperlink{_detector_fast_simulator_task_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00001}00001 \textcolor{comment}{// Author: Claude Pruneau   09/25/2019}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00003}00003 \textcolor{comment}{/*************************************************************************}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00004}00004 \textcolor{comment}{ * Copyright (C) 2019, Claude Pruneau.                                   *}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00005}00005 \textcolor{comment}{ * All rights reserved.                                                  *}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00006}00006 \textcolor{comment}{ * Based on the ROOT package and environment                             *}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00007}00007 \textcolor{comment}{ *                                                                       *}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00008}00008 \textcolor{comment}{ * For the licensing terms see LICENSE.                                  *}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00009}00009 \textcolor{comment}{ *************************************************************************/}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_detector_fast_simulator_task_8hpp}{DetectorFastSimulatorTask.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00019}\mbox{\hyperlink{_detector_fast_simulator_task_8cpp_ab132ebc964a276743b639aad7f053e71}{00019}} \mbox{\hyperlink{_detector_fast_simulator_task_8cpp_ab132ebc964a276743b639aad7f053e71}{ClassImp}}(\mbox{\hyperlink{class_detector_fast_simulator_task}{DetectorFastSimulatorTask}});}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00021}\mbox{\hyperlink{class_detector_fast_simulator_task_a5f29b206de0afd1cfd049f2e59edf9cc}{00021}} \mbox{\hyperlink{class_detector_fast_simulator_task_a5f29b206de0afd1cfd049f2e59edf9cc}{DetectorFastSimulatorTask::DetectorFastSimulatorTask}}(\textcolor{keyword}{const} TString \&          \_name,}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00022}00022                                                      \mbox{\hyperlink{class_configuration}{Configuration}} \&          \_configuration,}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00023}00023                                                      vector<EventFilter*>     \_eventFilters,}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00024}00024                                                      vector<ParticleFilter*>  \_particleFilters,}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00025}00025                                                      vector<ParticleSmearer*> \_particleSmearers,}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00026}00026                                                      \mbox{\hyperlink{class_message_logger_a1198794cb23cd903dcbc0072929a276a}{LogLevel}}                 \_selectedLevel)}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00027}00027 :}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00028}00028 \mbox{\hyperlink{class_task}{Task}}(\_name,\_configuration,\_eventFilters, \_particleFilters, \_particleSmearers, \_selectedLevel)}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00029}00029 \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00030}00030   \mbox{\hyperlink{class_message_logger_a10182fcb56fb5fda0f998c89c4bbe4fb}{appendClassName}}(\_name);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00031}00031   \mbox{\hyperlink{class_detector_fast_simulator_task_af0a3ab64ab88b0e8094ae010e24a0c7b}{setDefaultConfiguration}}();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00032}00032   \mbox{\hyperlink{class_task_a49a0a3ea6fdd10ab2fd9689dee256223}{setConfiguration}}(\_configuration);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00033}00033 \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00035}\mbox{\hyperlink{class_detector_fast_simulator_task_af0a3ab64ab88b0e8094ae010e24a0c7b}{00035}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_detector_fast_simulator_task_af0a3ab64ab88b0e8094ae010e24a0c7b}{DetectorFastSimulatorTask::setDefaultConfiguration}}()}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00036}00036 \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00037}00037   \mbox{\hyperlink{class_configuration}{Configuration}} \& \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}} = \mbox{\hyperlink{class_task_a1955cc87bd4885d8ca19435b3609443f}{getConfiguration}}();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00038}00038   \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}}.\mbox{\hyperlink{class_configuration_a8420b979e7d98bf6562ec2f6cc28d0d8}{setName}}(\textcolor{stringliteral}{"{}DetectorFastSimulatorTask Configuration"{}});}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00039}00039   \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}}.\mbox{\hyperlink{class_configuration_a1a297318ed8b8d8b0bd50d875477957b}{setParameter}}(\textcolor{stringliteral}{"{}useParticles"{}},    \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00040}00040   \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}}.\mbox{\hyperlink{class_configuration_a1a297318ed8b8d8b0bd50d875477957b}{setParameter}}(\textcolor{stringliteral}{"{}useEventStream0"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00041}00041   \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}}.\mbox{\hyperlink{class_configuration_a1a297318ed8b8d8b0bd50d875477957b}{setParameter}}(\textcolor{stringliteral}{"{}useEventStream1"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00042}00042   \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_message_logger_a3c62ebefe6cc36539e8ac33b5500c707}{reportDebug}}(\textcolor{stringliteral}{"{}DetectorFastSimulatorTask"{}},\mbox{\hyperlink{class_task_a37caaace682389f3dee73195362df1a2}{getName}}(),\textcolor{stringliteral}{"{}setDefaultConfiguration()"{}}))}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00043}00043     \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00044}00044     \mbox{\hyperlink{class_task_a674e9f776b29c02265731b543c6e32eb}{configuration}}.\mbox{\hyperlink{class_configuration_a8b19a94819ee67bf12fbab045cee329b}{printConfiguration}}(cout);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00045}00045     \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00046}00046 \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00049}\mbox{\hyperlink{class_detector_fast_simulator_task_a6c4653a3a482f322a11edccf0442cee9}{00049}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_detector_fast_simulator_task_a6c4653a3a482f322a11edccf0442cee9}{DetectorFastSimulatorTask::execute}}()}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00050}00050 \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00051}00051   \mbox{\hyperlink{class_task_a724ff83138229238fdc58566a0cd350f}{incrementEventProcessed}}();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00052}00052   \mbox{\hyperlink{class_particle_filter}{ParticleFilter}} \& particleFilterPrimary   = * \mbox{\hyperlink{class_task_a058e07f3edced0cf8f68f9358c2ff86e}{particleFilters}}[0];}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00053}00053   \mbox{\hyperlink{class_particle_filter}{ParticleFilter}} \& particleFilterSecondary = * \mbox{\hyperlink{class_task_a058e07f3edced0cf8f68f9358c2ff86e}{particleFilters}}[1];}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00054}00054   \mbox{\hyperlink{class_event}{Event}} \& \textcolor{keyword}{event}    = *\mbox{\hyperlink{class_task_a02048625ac29f05812d5229348d36f2e}{eventStreams}}[0]; \textcolor{comment}{// source -\/-\/ unsmeared}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00055}00055   \mbox{\hyperlink{class_event}{Event}} \& eventDet = *\mbox{\hyperlink{class_task_a02048625ac29f05812d5229348d36f2e}{eventStreams}}[1]; \textcolor{comment}{// target -\/-\/ smeared.}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00057}00057   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nParticles = \textcolor{keyword}{event}.getNParticles();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00058}00058   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} iParticle=0; iParticle<nParticles; iParticle++)}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00059}00059     \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00060}00060     \mbox{\hyperlink{class_particle}{Particle}} \& particle = * \textcolor{keyword}{event}.getParticleAt(iParticle);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00061}00061     \textcolor{keywordflow}{if} (particle.\mbox{\hyperlink{class_particle_afce9e4959bcef7d62736023036d40e3d}{isLive}}())}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00062}00062       \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00063}00063       \textcolor{keywordflow}{if} (particle.\mbox{\hyperlink{class_particle_a3afdcc5affe8c5843bc51619b250d8c5}{isPrimary}}())}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00064}00064         \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00065}00065         \textcolor{keywordflow}{if} (particleFilterPrimary.\mbox{\hyperlink{class_particle_filter_a8d9135b8eecd5fcb90ac3ba6566c7fed}{accept}}(particle))}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00066}00066           \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00067}00067           \mbox{\hyperlink{class_particle}{Particle}} \& particleDet = *\mbox{\hyperlink{class_task_aca6dc827b61b440bf610bba393beb673}{particleFactory}}-\/>\mbox{\hyperlink{class_factory_a6f646ad85a0e516aa9a93f6f5db1d8d3}{getNextObject}}();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00068}00068           particleDet = particle;}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00069}00069           particleDet.\mbox{\hyperlink{class_particle_a70cc5a533f063fbcdaaada1ff1ee703d}{setTruth}}(\&particle);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00070}00070           \mbox{\hyperlink{class_task_a348005e901a03674c25682a9370ebff0}{particleSmearers}}[0]-\/>smear(particle.\mbox{\hyperlink{class_particle_a562fcf06a3f5e28ca666b2ff8276b531}{getMomentum}}(),particleDet.\mbox{\hyperlink{class_particle_a562fcf06a3f5e28ca666b2ff8276b531}{getMomentum}}());}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00071}00071           eventDet.\mbox{\hyperlink{class_event_a2634bcc8f8dae7dce4578af73b98200a}{add}}(\&particleDet);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00072}00072           \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00073}00073         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (particleFilterSecondary.\mbox{\hyperlink{class_particle_filter_a8d9135b8eecd5fcb90ac3ba6566c7fed}{accept}}(particle))}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00074}00074           \{}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00075}00075           \mbox{\hyperlink{class_particle}{Particle}} \& particleDet = *\mbox{\hyperlink{class_task_aca6dc827b61b440bf610bba393beb673}{particleFactory}}-\/>\mbox{\hyperlink{class_factory_a6f646ad85a0e516aa9a93f6f5db1d8d3}{getNextObject}}();}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00076}00076           particleDet = particle;}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00077}00077           particleDet.\mbox{\hyperlink{class_particle_a70cc5a533f063fbcdaaada1ff1ee703d}{setTruth}}(\&particle);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00078}00078           \mbox{\hyperlink{class_task_a348005e901a03674c25682a9370ebff0}{particleSmearers}}[1]-\/>smear(particle.\mbox{\hyperlink{class_particle_a562fcf06a3f5e28ca666b2ff8276b531}{getMomentum}}(),particleDet.\mbox{\hyperlink{class_particle_a562fcf06a3f5e28ca666b2ff8276b531}{getMomentum}}());}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00079}00079           eventDet.\mbox{\hyperlink{class_event_a2634bcc8f8dae7dce4578af73b98200a}{add}}(\&particleDet);}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00080}00080           \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00081}00081         \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00082}00082       \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00083}00083     \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00084}00084 \}}
\DoxyCodeLine{\Hypertarget{_detector_fast_simulator_task_8cpp_source_l00085}00085 }

\end{DoxyCode}
